<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <title>Diplomski</title>
  
  <!-- Blockly headers -->
  <script src="../../appengine/storage.js"></script>
  <script src="../../blockly_compressed.js"></script>
  <script src="../../blocks_compressed.js"></script>
  <script src="../../javascript_compressed.js"></script>
  <script src="../../msg/js/en.js"></script>
  <script src="../../python_compressed.js"></script>
  <script src="/load_blocks"></script>
  <!-- <script src="customBlocks.js"></script> -->
  <!-- <script src="app.js"></script> -->
  <!-- <script scr="test_block.js"></script> -->

  <!-- Bootstrap/CSS headers -->
  <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.css">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/bower_components/jquery/dist/jquery.js"></script>
  <script src="/bower_components/bootstrap/dist/js/bootstrap.js"></script>

  

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark"><a class="navbar-brand" href="/" ">Blockly</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-item nav-link" href="/">Home <span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link" href="/add_blocks">Add Block</a>
            <a class="nav-item nav-link" href="/blocks">List of Added Blocks</a>
            <a class="nav-item nav-link" href="/block_factory">Block Factory</a>
            <!-- <a class="nav-item nav-link" href="/py_parse">Python Parser</a> -->
        </div>
      </div></nav>
    <br>
    <h3 style="text-align: center; font-size: 45px; font-weight: bold;">Blockly</h3>

    <p style="text-align: center;">
        <button class="btn btn-warning" onclick="showCode()">Show Python</button>
        <button class="btn btn-warning" onclick="runCode()">Run JavaScript</button>
        <a href="javascript:void(0)" id="a"><button class="btn btn-warning" onclick="saveCode()">Save Python</button></a>
        <a href="javascript:void(0)" id="b"><button class="btn btn-warning" onclick="saveText()">Save Text</button></a>
        <!-- <form action="/" method="GET" class="form-inline col-sm-12">
          <div class="form-group">
            <input type="text" name="search" placeholder="Block search..." class="form-control">
            <input type="submit" value="Search" class="btn btn-dark" style="margin-left: 10px;">
          </div>
        </form> -->
    </p>
    
    <div class="blockly-editor col-sm-12">
        <div id="blocklyDiv" class="blockly-container" style="height: 500px; width: 1300px;"></div>
    </div>

    <xml id="toolbox" style="display: none">
        <category name="Logic" colour="%{BKY_LOGIC_HUE}">
            <block type="controls_if"></block>
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_negate"></block>
            <block type="logic_boolean"></block>
            <block type="logic_null"></block>
            <block type="logic_ternary"></block>
        </category>
        <category name="Loops" colour="%{BKY_LOOPS_HUE}">
            <block type="controls_repeat_ext">
            <value name="TIMES">
                <block type="math_number">
                    <field name="NUM">10</field>
                </block>
            </value>
            </block>
            <block type="controls_whileUntil"></block>
            <block type="controls_for">
                <value name="FROM">
                  <shadow type="math_number">
                    <field name="NUM">1</field>
                  </shadow>
                </value>
                <value name="TO">
                  <shadow type="math_number">
                    <field name="NUM">10</field>
                  </shadow>
                </value>
                <value name="BY">
                  <shadow type="math_number">
                    <field name="NUM">1</field>
                  </shadow>
                </value>
              </block>
              <block type="controls_forEach"></block>
              <block type="controls_flow_statements"></block>
        </category>
        <category name="Math" colour="%{BKY_MATH_HUE}">
            <block type="math_number">
                <field name="NUM">123</field>
            </block>
            <block type="math_arithmetic"></block>
            <block type="math_single"></block>
            <block type="math_trig"></block>
            <block type="math_constant"></block>
            <block type="math_number_property"></block>
            <block type="math_round">
                <value name="NUM">
                    <field name="NUM">3.1</field>
                </value>
            </block>
            <block type="math_modulo"></block>
            <block type="math_random_int"></block>
            <block type="math_random_float"></block>
        </category>
        <category name="Text" colour="%{BKY_TEXTS_HUE}">
              <block type="text"></block>
              <block type="text_append"></block>
              <block type="text_length"></block>
              <block type="text_print"></block>
              <block type="text_join"></block>
        </category>

        <category name="TEDD_test" colour="#FF0c0c" id="TEDD_test">
          
          <block type="tedd_test2"></block>
          <block type="tedd_helloworld"></block>
          <block type="import">
            <field name="import_value">import_time</field>
          </block>
        
          <block type="import_custom">
              <field name="import_value">custom_import</field>
          </block>
        
        
          <block type="import_custom">
            <field name="import_value">Utils.utilities</field>
            <next>
              <block type="klema_15">
                <value name="errorID">
                  <block type="math_number">
                    <field name="positive_check">TRUE</field>
                    <field name="NUM">0</field>
                  </block>
                </value>
              </block>
            </next>
          </block>
          
          <block type="start_board">
            <value name="state">
              <block type="math_number">
                <field name="NUM">0</field>
              </block>
            </value>
            <value name="errorID">
              <block type="math_number">
                <field name="NUM">0</field>
              </block>
            </value>
          </block>
          
          <block type="import_custom">
            <field name="import_value">Utils.API_Diagnostic</field>
            <next>
              <block type="check_dtc_status">
                <value name="dtc">
                  <block type="text">
                    <field name="TEXT"></field>
                  </block>
                </value>
                <value name="errorID">
                  <block type="math_number">
                    <field name="NUM">0</field>
                  </block>
                </value>
              </block>
            </next>
          </block>
        
</category>

        <category name="Test" colour="#00aa44" id="test">
          <block type="test_block"></block>
          <block type="test_block2"></block>
          <block type="citac_pythona"></block>
          <block type="input_block"></block>
        

<block type="zbrajanje" class="zbrajanje"></block>


<block type="funkcija_zbr" class="funkcija_zbr"></block>
<block type="mnozenje" class="mnozenje"></block>
</category>
</xml>

<script>
    var blocklyArea = document.getElementById('blocklyArea');
    var demoWorkspace = Blockly.inject('blocklyDiv', {media: '../../media/', toolbox: document.getElementById('toolbox'), 
    grid:
    {
        spacing: 20, 
        length: 3, 
        colour: '#ccc', 
        snap: true
    }, 
    zoom:
    {
        controls: true,
        wheel: true,
        startScale: 1.0,
        maxScale: 3,
        minScle: 0.3,
        scaleSpeed: 1.2
    }
});
        
    function showCode() // funkcija za prikaz python koda
    {
        // Generate JavaScript code and display it.
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        var code_python = Blockly.Python.workspaceToCode(demoWorkspace);
        alert(code_python);
    }
        
    function runCode() // pokretanje koda kao javascript
    {
        // Generate JavaScript code and run it.
        window.LoopTrap = 1000;
        Blockly.JavaScript.INFINITE_LOOP_TRAP = 'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
        var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        try 
        {
            eval(code);
        } 
        catch (e) 
        {
            alert(e);
        }
    }

    function download(text, name, type) // funkcija za spremanje preko id "a"
    {
        var a = document.getElementById("a");
        var file = new Blob([text], {type: type});
        a.href = URL.createObjectURL(file);
        a.download = name;
    }
        
    function saveCode() // funkcija za spremanje blokova u python skriptu
    {
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        var code = Blockly.Python.workspaceToCode(demoWorkspace);
        download(code, 'test_workspace.py', 'text/plain');
    };
        
    function downloadText(text, name, type) // funkcija za spremanje preko id "b"
    {
        var b = document.getElementById("b");
        var file = new Blob([text], {type: type});
        b.href = URL.createObjectURL(file);
        b.download = name;
    }

    function saveText() // funkcija za spremanje blokova u text file
    {
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        var texted_code = Blockly.Python.workspaceToCode(demoWorkspace);
        downloadText(texted_code, 'test_tekst.txt', 'text/plain');
    }
</script>
<div class="footer col-sm-12" style="text-align: center;">
    <p>Copyright &#xA9; 2019</p>
</div>


</body></html>